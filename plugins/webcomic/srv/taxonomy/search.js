!function(){"use strict";!function t(){if("loading"===document.readyState)return document.addEventListener("DOMContentLoaded",t);function d(a,n){var t=document.querySelector('[name="'.concat(a.getAttribute("data-input"),'"]')),e=new FormData,c=new XMLHttpRequest;t.value=n,t.value!==n&&t.dispatchEvent(new Event("change",{bubbles:!0})),e.append("action","webcomic_update_comic_term_search"),e.append("term",n),c.onreadystatechange=function(){var t,e;if(4===c.readyState)return n?(t=a,e=JSON.parse(c.responseText),t.innerHTML='\n\t\t\t<a class="dashicons dashicons-no">\n\t\t\t\t<span class="screen-reader-text">'.concat(t.getAttribute("data-webcomic-term-search-remove"),"</span>\n\t\t\t</a>\n\t\t\t<strong>").concat(e.title,"</strong><br>\n\t\t\t").concat(e.media),void t.querySelector("a").addEventListener("click",function(){d(t,0)})):(function(r){r.querySelector("input")||(r.innerHTML='<input type="search" id="'.concat(r.getAttribute("data-webcomic-term-search"),'" class="widefat" placeholder="').concat(r.getAttribute("data-webcomic-term-search-search"),'">'));r.querySelector("div")||(r.innerHTML+="<div></div>");r.querySelector("input").addEventListener("input",function(t){var e,a,n,c;e=r,a=t.target.value,n=new FormData,c=new XMLHttpRequest,n.append("action","webcomic_update_comic_term_search"),n.append("query",a),n.append("taxonomy",e.getAttribute("data-webcomic-term-taxonomy")),c.onreadystatechange=function(){4===c.readyState&&function(e,t,a){for(var n='<table class="widefat fixed striped media">',c=0;c<a.length;c++)n+='\n\t\t\t<tr data-id="'.concat(a[c].term_id,'">\n\t\t\t\t<td class="title column-title column-primary">\n\t\t\t\t\t<strong class="has-media-icon">\n\t\t\t\t\t\t<span class="media-icon image-icon">').concat(a[c].webcomic_term_media,"</span>\n\t\t\t\t\t\t").concat(a[c].name,"\n\t\t\t\t\t</strong>\n\t\t\t\t</td>\n\t\t\t</tr>");if(t&&!a.length&&(n+="<tr><td>".concat(e.getAttribute("data-webcomic-term-search-null"),"</td></tr>")),n+="</table>",e.querySelector("div").innerHTML=n.replace('<table class="widefat fixed striped media"></table>',"<small>".concat(e.getAttribute("data-webcomic-term-search-info"),"</small>")),a)for(var r=e.querySelectorAll("[data-id]"),i=function(t){r[t].addEventListener("click",function(){d(e,Number(r[t].getAttribute("data-id")))})},o=0;o<r.length;o++)i(o)}(e,a,JSON.parse(c.responseText))},c.open("POST",ajaxurl),c.send(n)})}(a),void a.querySelector("input").dispatchEvent(new Event("input")))},c.open("POST",ajaxurl),c.send(e)}jQuery(document).on("widget-added widget-updated",function(t,e){if(!e[0].id.match(/_mgsisk_webcomic_/))return;for(var a=e[0].querySelectorAll("[data-webcomic-term-search]"),n=0;n<a.length;n++)d(a[n],Number(document.querySelector('[name="'.concat(a[n].getAttribute("data-input"),'"]')).value))}),function(t){for(var e=0;e<t.length;e++)d(t[e],Number(document.querySelector('[name="'.concat(t[e].getAttribute("data-input"),'"]')).value))}(document.querySelectorAll("[data-webcomic-term-search]"))}()}();
